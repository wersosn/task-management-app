<UserControl x:Class="SuperZTP.Views.MenuView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SuperZTP.Views"
             mc:Ignorable="d">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/> <!-- Sidebar -->
                <ColumnDefinition Width="*"/>   <!-- Główna zawartość -->
            </Grid.ColumnDefinitions>

            <!-- Lewy panel (Sidebar) -->
            <Border Grid.Column="0" Background="#F0F0F0" Padding="10">
                <StackPanel>

                    <!-- Nawigacja -->
                    <Button Content="📋 Notatki" Height="40" Margin="5"/>
                    <Button Content="✅ Zadania" Height="40" Margin="5"/>
                    <Button Content="📅 Kalendarz" Height="40" Margin="5"/>

                    <!-- Przyciski dodawania -->
                    <Button Content="➕ Dodaj zadanie" Height="40" Margin="5" Command="{Binding AddTaskCommand}"/>
                    <Button Content="📝 Dodaj notatkę" Height="40" Margin="5" Command="{Binding AddNoteCommand}"/>
                </StackPanel>
            </Border>

            <!-- Prawa sekcja (Główna zawartość) -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>  <!-- Pasek wyszukiwania -->
                    <RowDefinition Height="Auto"/>  <!-- Sekcja filtrów -->
                    <RowDefinition Height="*"/>     <!-- Główna zawartość -->
                </Grid.RowDefinitions>

                <!-- Pasek wyszukiwania -->
                <StackPanel Orientation="Horizontal" Margin="10">
                    <TextBlock Text="Wyszukaj zadanie" VerticalAlignment="Center" Margin="5"/>
                    <TextBox Width="300" Text="{Binding SelectedTitle, Mode=TwoWay}"/>
                </StackPanel>

                <!-- Sekcja filtrów -->
                <Expander Grid.Row="1" Header="Filtry" IsExpanded="False" Margin="10">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="1*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="5">
                                <TextBlock Text="Opcje sortowania"/>
                                <ComboBox ItemsSource="{Binding AvailableSortOptionsList}" SelectedItem="{Binding SelectedSort, Mode=TwoWay}" Width="150"/>

                                <TextBlock Text="Opcje grupowania"/>
                                <ComboBox ItemsSource="{Binding AvailableGroups}" SelectedItem="{Binding SelectedGroupingOption, Mode=TwoWay}" Width="150"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="5">
                                <TextBlock Text="Status wykonania"/>
                                <ComboBox ItemsSource="{Binding AvailableCompletionStatusList}" SelectedItem="{Binding SelectedCompletionStatus, Mode=TwoWay}" Width="150"/>

                                <TextBlock Text="Kategoria"/>
                                <ComboBox ItemsSource="{Binding AvailableCategories}" SelectedItem="{Binding SelectedCategory, Mode=TwoWay}" Width="150"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Margin="5">
                                <TextBlock Text="Tagi"/>
                                <ComboBox ItemsSource="{Binding AvailableTags}" SelectedItem="{Binding SelectedTag, Mode=TwoWay}" Width="150"/>

                                <TextBlock Text="Wybierz termin wykonania"/>
                                <DatePicker SelectedDate="{Binding SelectedDueDate, Mode=TwoWay}" Width="150"/>
                            </StackPanel>
                        </Grid>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
                            <Button Content="Zastosuj Filtry" Command="{Binding ApplyAllFiltersCommand}" Foreground="MediumSeaGreen" Padding="5" FontWeight="Bold"/>
                            <Button Content="Reset" Command="{Binding ClearFiltersCommand}" Foreground="Red" Padding="5" FontWeight="Bold" Margin="10 0"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- Główna zawartość -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2.5*"/>  <!-- Oś Czasu (POSZERZONE) -->
                        <ColumnDefinition Width="1*"/>    <!-- Kalendarz + Szczegóły -->
                    </Grid.ColumnDefinitions>

                    <!-- Oś Czasu (Lista zadań) -->
                    <Border Grid.Column="0" BorderBrush="Gray" BorderThickness="1" Margin="10">
                        <StackPanel>
                            <TextBlock Text="Oś czasu" FontSize="18" FontWeight="Bold" Margin="10"/>
                            <local:DisplayTasksView DataContext="{Binding DisplayTasksViewModel}"/>
                        </StackPanel>
                    </Border>

                    <!-- Kalendarz + Szczegóły zadania -->
                    <StackPanel Grid.Column="1" Margin="10">
                        <TextBlock Text="Kalendarz" FontSize="18" FontWeight="Bold"/>
                        <Calendar x:Name="CalendarView"/>

                        <!-- Szczegóły zadania POD kalendarzem -->
                        <Border BorderBrush="Gray" BorderThickness="1" Margin="10 0 0 10" Padding="10">
                            <StackPanel>
                                <TextBlock Text="Szczegóły zadania" FontSize="18" FontWeight="Bold" Margin="5"/>

                                <TextBlock Text="Tytuł:" FontWeight="Bold"/>
                                <TextBlock Text="{Binding SelectedTask.Title}" FontSize="16"/>

                                <TextBlock Text="Opis:" FontWeight="Bold" Margin="5 0 0 10"/>
                                <TextBlock Text="{Binding SelectedTask.Description}" TextWrapping="Wrap"/>

                                <TextBlock Text="Priorytet:" FontWeight="Bold" Margin="5 0 0 10"/>
                                <TextBlock Text="{Binding SelectedTask.Priority}"/>

                                <TextBlock Text="Status:" FontWeight="Bold" Margin="5 0 0 10"/>
                                <TextBlock Text="{Binding SelectedTask.IsDone}"/>

                                <TextBlock Text="Termin wykonania:" FontWeight="Bold" Margin="5 0 0 10"/>
                                <TextBlock Text="{Binding SelectedTask.Date, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>
